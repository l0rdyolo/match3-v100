{"version":3,"sources":["file:///C:/Users/maide/OneDrive/Documents/GitHub/match3-2d/assets/Scripts/Grid/GridGenerator.ts"],"names":["_decorator","Component","instantiate","Vec3","EasyLevels","InGameAssets","ccclass","property","GridGenerator","start","generate","levels","update","deltaTime","setNodeActive","settingNode","isActive","active","level","rows","cols","gridData","grid","tileSize","row","col","currentClass","assetType","AssetClass","get","length","randomIndex","Math","floor","random","console","log","randomAsset","newNode","node","addChild","position","getTilePosition","setPosition","x","y"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;;AAC1CC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;+BAGjBQ,a,WADZF,OAAO,CAAC,eAAD,C,gBAAR,MACaE,aADb,SACmCP,SADnC,CAC6C;AAE3CQ,QAAAA,KAAK,GAAG;AACN,eAAKC,QAAL,CAAc;AAAA;AAAA,wCAAWC,MAAX,CAAkB,CAAlB,CAAd;AACD;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAAE;;AAEpBC,QAAAA,aAAa,CAACC,WAAD,EAAoBC,QAApB,EAAuC;AAC1DD,UAAAA,WAAW,CAACE,MAAZ,GAAqBD,QAArB;AACD;;AAEDN,QAAAA,QAAQ,CAACQ,KAAD,EAAmB;AACzB,cAAMC,IAAI,GAAGD,KAAK,CAACC,IAAnB;AACA,cAAMC,IAAI,GAAGF,KAAK,CAACE,IAAnB;AACA,cAAMC,QAAQ,GAAGH,KAAK,CAACI,IAAvB;AACA,cAAMC,QAAQ,GAAG,GAAjB,CAJyB,CAIH;;AAEtB,eAAK,IAAIC,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGL,IAAxB,EAA8BK,GAAG,EAAjC,EAAqC;AACnC,iBAAK,IAAIC,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGL,IAAxB,EAA8BK,GAAG,EAAjC,EAAqC;AACnC,kBAAMC,YAAY,GAAGL,QAAQ,CAACG,GAAD,CAAR,CAAcC,GAAd,CAArB;AACA,kBAAME,SAAS,GAAG;AAAA;AAAA,gDAAaC,UAAb,CAAwBC,GAAxB,CAA4BH,YAA5B,CAAlB;;AAEA,kBAAIC,SAAS,IAAIA,SAAS,CAACG,MAAV,GAAmB,CAApC,EAAuC;AACrC,oBAAMC,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBP,SAAS,CAACG,MAArC,CAApB;AACAK,gBAAAA,OAAO,CAACC,GAAR,CAAYL,WAAZ;AAEA,oBAAMM,WAAW,GAAGV,SAAS,CAACI,WAAD,CAA7B;;AAEA,oBAAIM,WAAJ,EAAiB;AACf,sBAAMC,OAAO,GAAGpC,WAAW,CAACmC,WAAD,CAA3B;AAEA,uBAAKE,IAAL,CAAUC,QAAV,CAAmBF,OAAnB;AACA,sBAAMG,QAAQ,GAAG,KAAKC,eAAL,CAAqBlB,GAArB,EAA0BC,GAA1B,EAA+BF,QAA/B,CAAjB;AACAe,kBAAAA,OAAO,CAACK,WAAR,CAAoBF,QAApB;AACAH,kBAAAA,OAAO,CAACrB,MAAR,GAAiB,IAAjB;AACD;AACF;AACF,aApBkC,CAsBnC;AACF;AACA;;AACC;AACF,SA5C0C,CA8C3C;;;AACQyB,QAAAA,eAAe,CAAClB,GAAD,EAAcC,GAAd,EAA2BF,QAA3B,EAAmD;AACxE,cAAMqB,CAAC,GAAGnB,GAAG,GAAGF,QAAhB;AACA,cAAMsB,CAAC,GAAGrB,GAAG,GAAGD,QAAhB;AACAY,UAAAA,OAAO,CAACC,GAAR,CAAYQ,CAAZ,EAAcC,CAAd;AAEA,iBAAO,IAAI1C,IAAJ,CAASyC,CAAT,EAAYC,CAAZ,EAAe,CAAf,CAAP;AACD;;AArD0C,O","sourcesContent":["import { _decorator, Component, Node, instantiate, Vec3, Vec2 } from \"cc\";\nimport { EasyLevels } from \"../Levels/EasyLevels\";\nimport { InGameAssets } from \"../InGameAssets\";\nimport { LevelData } from \"../Levels/LevelData\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"GridGenerator\")\nexport class GridGenerator extends Component {\n\n  start() {\n    this.generate(EasyLevels.levels[3]);\n  }\n\n  update(deltaTime: number) {}\n\n  private setNodeActive(settingNode: Node, isActive: boolean) {\n    settingNode.active = isActive;\n  }\n\n  generate(level: LevelData) {\n    const rows = level.rows;\n    const cols = level.cols;\n    const gridData = level.grid;\n    const tileSize = 100; // burayı değiştir\n\n    for (let row = 0; row < rows; row++) {\n      for (let col = 0; col < cols; col++) {\n        const currentClass = gridData[row][col];\n        const assetType = InGameAssets.AssetClass.get(currentClass);\n        \n        if (assetType && assetType.length > 0) {\n          const randomIndex = Math.floor(Math.random() * assetType.length );\n          console.log(randomIndex);\n          \n          const randomAsset = assetType[randomIndex];\n\n          if (randomAsset) {\n            const newNode = instantiate(randomAsset);\n          \n            this.node.addChild(newNode);\n            const position = this.getTilePosition(row, col, tileSize);\n            newNode.setPosition(position);\n            newNode.active = true;\n          }\n        }\n      }\n\n      //to center grid\n    //   const newPosition = new Vec3(-1 * (tileSize*2),100,0)\n    //   this.node.setPosition(newPosition )\n    }\n  }\n\n  // Griddeki her bir tile'ın pozisyonunu hesaplar\n  private getTilePosition(row: number, col: number, tileSize: number): Vec3 {\n    const x = col * tileSize\n    const y = row * tileSize\n    console.log(x,y);\n    \n    return new Vec3(x, y, 0);\n  }\n}\n"]}