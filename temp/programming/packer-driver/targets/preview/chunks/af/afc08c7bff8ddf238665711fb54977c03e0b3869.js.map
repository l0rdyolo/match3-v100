{"version":3,"sources":["file:///C:/Users/maide/OneDrive/Masa%C3%BCst%C3%BC/match3-2d/assets/Scripts/Grid/MatchChecker.ts"],"names":["_decorator","Color","Sprite","EffectManager","ccclass","property","Direction","MatchChecker","SwapPiecePositions","pieceA","pieceB","posA","posB","gridMap","movePiece","highlightNeighbors","posAData","get","posBData","set","piece","dx","dy","directions","currentPiece","neighborPiecePosition","row","col","getPieceAtPosition","getChildByName","getComponent","color","dummyColor","position","Array","from","entries","find","_","pos"],"mappings":"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","sourcesContent":["import { _decorator, Color, director, Node, Sprite, SpriteRenderer, Vec3 } from \"cc\";\nimport { EffectManager } from \"../Effects/EffectManager\";\nconst { ccclass ,property } = _decorator;\n\nenum Direction {\n  Horizontal,\n  Vertical,\n}\n\n@ccclass(\"MatchChecker\")\nexport class MatchChecker {\n  private static directions = [\n    { dx: 0, dy: 1 }, // Right\n    { dx: 0, dy: -1 }, // Left\n    { dx: 1, dy: 0 }, // Down\n    { dx: -1, dy: 0 }, // Up\n  ];\n\n  @property(Color) private static dummyColor : Color = null!;\n\n\n  public static async SwapPiecePositions(\n    pieceA: Node,\n    pieceB: Node,\n    posA: Vec3,\n    posB: Vec3,\n    gridMap: Map<Node, { row: number; col: number }>\n  ) {\n    EffectManager.movePiece(pieceA, posB, 0.1);\n    await EffectManager.movePiece(pieceB, posA, 0.1);\n    // Update the gridMap\n    this.highlightNeighbors(pieceA , gridMap)\n    const posAData = gridMap.get(pieceA);\n    const posBData = gridMap.get(pieceB);\n    gridMap.set(pieceA, posBData);\n    gridMap.set(pieceB, posAData);\n  }\n\n\n  private static highlightNeighbors(\n    piece: Node,\n    gridMap: Map<Node, { row: number; col: number }>\n  ): void {\n    for (const { dx, dy } of this.directions) {\n      const currentPiece = gridMap.get(piece);\n      const neighborPiecePosition = {\n        row: currentPiece.row + dx,\n        col: currentPiece.col + dy,\n      };\n      //bla bla\n      const piece =this.getPieceAtPosition(neighborPiecePosition, gridMap); \n      if(piece){\n        piece.getChildByName(\"Sprite\").getComponent(Sprite).color = this.dummyColor\n      }\n    }\n  }\n  private static getPieceAtPosition(\n    position: { row: number; col: number },\n    gridMap: Map<Node, { row: number; col: number }>\n  ): Node | undefined {\n    return Array.from(gridMap.entries()).find(\n      ([_, pos]) => pos.row === position.row && pos.col === position.col\n    )?.[0];\n\n  }\n}\n"]}