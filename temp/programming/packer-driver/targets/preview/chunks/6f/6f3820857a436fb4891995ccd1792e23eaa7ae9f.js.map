{"version":3,"sources":["file:///C:/Users/maide/OneDrive/Documents/GitHub/match3-v100/assets/Scripts/Piece/PiecePool.ts"],"names":["_decorator","Component","Prefab","instantiate","ccclass","property","PiecePool","pool","getRandomPrefab","randomIndex","Math","floor","random","piecesPrefabs","length","getPiece","piece","pop","prefab","returnPiece","active","push","clearAll","forEach","destroy"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;;;;;;;;;OACxC;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;AAE9B;AACA;AACA;AACA;AACA;;2BAKaM,S,WADZF,OAAO,CAAC,WAAD,C,UAEHC,QAAQ,CAAC,CAACH,MAAD,CAAD,C,2BAFb,MACaI,SADb,SAC+BL,SAD/B,CACyC;AAAA;AAAA;;AAAA;;AAAA,eAI7BM,IAJ6B,GAId,EAJc;AAAA;;AAM7BC,QAAAA,eAAe,GAAW;AAC9B,cAAMC,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,KAAKC,aAAL,CAAmBC,MAA9C,CAApB;AACA,iBAAO,KAAKD,aAAL,CAAmBJ,WAAnB,CAAP;AACH;;AAEMM,QAAAA,QAAQ,GAAS;AACpB,cAAI,KAAKR,IAAL,CAAUO,MAAV,GAAmB,CAAvB,EAA0B;AACtB,gBAAME,KAAK,GAAG,KAAKT,IAAL,CAAUU,GAAV,EAAd,CADsB,CAEtB;;AACA,mBAAOD,KAAP;AACH,WAJD,MAIO;AACH,gBAAME,MAAM,GAAG,KAAKV,eAAL,EAAf;AACA,mBAAOL,WAAW,CAACe,MAAD,CAAlB;AACH;AACJ;;AAEMC,QAAAA,WAAW,CAACH,KAAD,EAAc;AAC5BA,UAAAA,KAAK,CAACI,MAAN,GAAe,KAAf;AACA,eAAKb,IAAL,CAAUc,IAAV,CAAeL,KAAf;AACH;;AAEMM,QAAAA,QAAQ,GAAG;AACd,eAAKf,IAAL,CAAUgB,OAAV,CAAkBP,KAAK,IAAIA,KAAK,CAACQ,OAAN,EAA3B;AACA,eAAKjB,IAAL,GAAY,EAAZ;AACH;;AA9BoC,O;;;;;iBAEX,E","sourcesContent":["import { _decorator, Component, Node, Prefab, instantiate } from 'cc';\nconst { ccclass, property } = _decorator;\n\n/**\n //! todo\n *  bu s覺n覺f覺 singelton yapal覺m.\n * \n */\n\n\n\n@ccclass('PiecePool')\nexport class PiecePool extends Component {\n    @property([Prefab])\n    piecesPrefabs: Prefab[] = [];\n\n    private pool: Node[] = [];\n\n    private getRandomPrefab(): Prefab {\n        const randomIndex = Math.floor(Math.random() * this.piecesPrefabs.length);\n        return this.piecesPrefabs[randomIndex];\n    }\n\n    public getPiece(): Node {\n        if (this.pool.length > 0) {\n            const piece = this.pool.pop();\n            // piece!.active = true; \n            return piece!;\n        } else {\n            const prefab = this.getRandomPrefab();\n            return instantiate(prefab);\n        }\n    }\n\n    public returnPiece(piece: Node) {\n        piece.active = false; \n        this.pool.push(piece);\n    }\n\n    public clearAll() {\n        this.pool.forEach(piece => piece.destroy());\n        this.pool = [];\n    }\n}\n"]}