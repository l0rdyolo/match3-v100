{"version":3,"sources":["file:///C:/Users/maide/OneDrive/Documents/GitHub/match3-v100/assets/Scripts/Pools/PiecesPool.ts"],"names":["_decorator","instantiate","Prefab","Poolable","ccclass","property","PiecesPool","createIndex","creator","Math","floor","random","piecesPrefabs","length","obj","setParent","node","onLoad","PoolHelper","registerPool","getPieceFromPool","returnPieceToPool","piece","pool","release"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAuBC,MAAAA,W,OAAAA,W;AAAmBC,MAAAA,M,OAAAA,M;;AAC1CC,MAAAA,Q,iBAAAA,Q;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;4BAGjBM,U,WADZF,OAAO,CAAC,YAAD,C,UAELC,QAAQ,CAAC,CAACH,MAAD,CAAD,C,2BAFX,MACaI,UADb;AAAA;AAAA,gCACyC;AAAA;AAAA;;AAAA;;AAAA,eAI/BC,WAJ+B,GAIT,CAJS;AAAA;;AAM7BC,QAAAA,OAAO,GAAS;AACxB,eAAKD,WAAL,GAAmBE,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,KAAKC,aAAL,CAAmBC,MAA9C,CAAnB,CADwB,CAExB;;AACA,gBAAMC,GAAG,GAAGb,WAAW,CAAC,KAAKW,aAAL,CAAmB,KAAKL,WAAxB,CAAD,CAAvB;AACAO,UAAAA,GAAG,CAACC,SAAJ,CAAc,KAAKC,IAAnB;AACA,iBAAOF,GAAP;AACH;;AAEWG,QAAAA,MAAM,GAAS;AACvB,gBAAMA,MAAN;AACAC,UAAAA,UAAU,CAACC,YAAX,CAAwBb,UAAxB,EAAoC,IAApC;AACD;;AAEMc,QAAAA,gBAAgB,GAAS;AAC9B,gBAAMN,GAAG,GAAG,KAAKN,OAAL,EAAZ;AACA,iBAAOM,GAAP;AACD;;AAGMO,QAAAA,iBAAiB,CAACC,KAAD,EAAoB;AAC1C,eAAKC,IAAL,CAAUC,OAAV,CAAkBF,KAAlB;AACD;;AA3BsC,O;;;;;iBAEL,E","sourcesContent":["import { _decorator, Component, instantiate, Node, Prefab } from \"cc\";\nimport { Poolable } from \"../../SooLib/Optimization/Poolable\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"PiecesPool\")\nexport class PiecesPool extends Poolable {\n  @property([Prefab])\n  private piecesPrefabs: Prefab[] = [];\n\n  private createIndex: number = 0;\n\n  protected creator(): Node {\n    this.createIndex = Math.floor(Math.random() * this.piecesPrefabs.length);\n    // this.createIndex = (this.createIndex + 1) % this.piecesPrefabs.length;\n    const obj = instantiate(this.piecesPrefabs[this.createIndex]);\n    obj.setParent(this.node);\n    return obj;\n}\n\n  protected onLoad(): void {\n    super.onLoad();\n    PoolHelper.registerPool(PiecesPool, this);\n  }\n\n  public getPieceFromPool(): Node {\n    const obj = this.creator();\n    return obj;\n  }\n  \n\n  public returnPieceToPool(piece: Node): void {\n    this.pool.release(piece); \n  }\n}"]}