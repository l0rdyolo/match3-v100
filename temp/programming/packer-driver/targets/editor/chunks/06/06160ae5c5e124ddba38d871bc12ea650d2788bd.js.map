{"version":3,"sources":["file:///C:/Users/maide/OneDrive/Documents/GitHub/match3-2d/assets/Scripts/Poolable/PiecesPool.ts"],"names":["_decorator","instantiate","Prefab","Poolable","PoolHelper","ccclass","property","PiecesPool","createIndex","getPieceFromPool","creator","obj","piecesPrefabs","length","setParent","node","onLoad","registerPool"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAuBC,MAAAA,W,OAAAA,W;AAAmBC,MAAAA,M,OAAAA,M;;AAC1CC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,U,iBAAAA,U;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;4BAGjBO,U,WADZF,OAAO,CAAC,YAAD,C,UAELC,QAAQ,CAAC,CAACJ,MAAD,CAAD,C,2BAFX,MACaK,UADb;AAAA;AAAA,gCACyC;AAAA;AAAA;;AAAA;;AAAA,eAI/BC,WAJ+B,GAIT,CAJS;AAAA;;AAMhCC,QAAAA,gBAAgB,GAAS;AAC9B,iBAAO,KAAKC,OAAL,EAAP;AACD;;AAESA,QAAAA,OAAO,GAAS;AACxB,gBAAMC,GAAG,GAAGV,WAAW,CAAC,KAAKW,aAAL,CAAmB,KAAKJ,WAAxB,CAAD,CAAvB;AACA,eAAKA,WAAL,GAAmB,CAAC,KAAKA,WAAL,GAAmB,CAApB,IAAyB,KAAKI,aAAL,CAAmBC,MAA/D;AACAF,UAAAA,GAAG,CAACG,SAAJ,CAAc,KAAKC,IAAnB;AACA,iBAAOJ,GAAP;AACD;;AAESK,QAAAA,MAAM,GAAS;AACvB,gBAAMA,MAAN;AACA;AAAA;AAAA,wCAAWC,YAAX,CAAwBV,UAAxB,EAAoC,IAApC;AACD;;AApBsC,O;;;;;iBAEL,E","sourcesContent":["import { _decorator, Component, instantiate, Node, Prefab } from \"cc\";\nimport { Poolable } from \"../../SooLib/Optimization/Poolable\";\nimport { PoolHelper } from \"../PoolHelper\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"PiecesPool\")\nexport class PiecesPool extends Poolable {\n  @property([Prefab])\n  private piecesPrefabs: Prefab[] = [];\n\n  private createIndex: number = 0;\n\n  public getPieceFromPool(): Node {\n    return this.creator();\n  }\n  \n  protected creator(): Node {\n    const obj = instantiate(this.piecesPrefabs[this.createIndex]);\n    this.createIndex = (this.createIndex + 1) % this.piecesPrefabs.length;\n    obj.setParent(this.node);\n    return obj;\n  }\n\n  protected onLoad(): void {\n    super.onLoad();\n    PoolHelper.registerPool(PiecesPool, this);\n  }\n}\n"]}