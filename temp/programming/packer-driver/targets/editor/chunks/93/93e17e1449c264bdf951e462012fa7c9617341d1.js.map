{"version":3,"sources":["file:///C:/Users/maide/OneDrive/Documents/GitHub/match3-v100/assets/Scripts/Piece/Piece.ts"],"names":["Piece","Node","tween","Vec3","SelectionManager","constructor","row","col","node","type","on","EventType","TOUCH_START","onTouch","getInstance","eventTarget","emit","updatePosition","newX","gridCellSize","newY","setPosition","Shake","duration","originalPosition","getPosition","shakeAmount","Promise","resolve","by","position","call","start","Highlight","to","scale","ResetScale"],"mappings":"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","sourcesContent":["import { Node, tween, Vec3 } from \"cc\";\nimport { IPiece } from \"./IPiece\";\nimport { PieceTypes } from \"./PieceTypes\";\nimport { SelectionManager } from \"../Interaction/SelectionManager\";\n\nexport class Piece implements IPiece  {\n  public row: number = -1!;\n  public col: number = -1!;\n  public node: Node;\n  public type: PieceTypes = null;\n\n  public constructor(row: number, col: number, node: Node, type: PieceTypes) {\n    \n    this.row = row;\n    this.col = col;\n    this.node = node;\n    this.type = type;\n    \n    this.node.on(Node.EventType.TOUCH_START, this.onTouch, this);\n  }\n\n  onTouch() {\n      SelectionManager.getInstance().eventTarget.emit('piece-selected', this);\n  }\n\n  updatePosition() {\n    // Satır ve sütun değerlerini kullanarak yeni pozisyonu hesapla\n    const newX =  (this.col * this.gridCellSize);\n    const newY =  (this.row * this.gridCellSize);  // Y ekseni negatif çünkü ekranın üstünden altına doğru gidiyoruz\n\n    // Parçanın node'unu yeni pozisyona taşı\n    this.node.setPosition(new Vec3(newX, newY, 0));\n}\n\n  public Shake(duration : number = 0.3){\n    const originalPosition = this.node.getPosition();\n    const shakeAmount = 10; // Sarsılma miktarı\n\n    return new Promise<void>((resolve) => {\n        tween(this.node)\n            .by(duration / 4, { position: new Vec3(shakeAmount, 0, 0) }) \n            .by(duration / 4, { position: new Vec3(-shakeAmount * 2, 0, 0) }) \n            .by(duration / 4, { position: new Vec3(shakeAmount * 2, 0, 0) }) \n            .by(duration / 4, { position: new Vec3(-shakeAmount, 0, 0) }) \n            .call(() => {\n                this.node.setPosition(originalPosition); \n                resolve();\n            })\n            .start();\n    });\n  }\n\n  public Highlight(){\n    tween(this.node)\n    .to(0.1,{scale : new Vec3(1.1,1.1,1.1)})\n    .start();\n  }\n\n  public ResetScale(duration: number = 0.1) {\n    tween(this.node)\n        .to(duration, { scale: new Vec3(1, 1, 1) })\n        .start();\n}\n}\n"]}